"use strict";!function(o){o(window).on("scroll",function(){var t=o(this).scrollTop();600<=t?o("aside").stop(!0).animate({top:0,opacity:1}):o("aside").stop(!0).animate({top:-59,opacity:0}),600<=t?o(".totop").stop(!0).animate({opacity:1}).show():o(".totop").stop(!0).animate({opacity:0},function(){o(this).hide()})}),o(".totop").hover(function(){o(this).css({background:"rgba(0, 0, 0, 0.5)"})},function(){o(this).css({background:"rgba(0, 0, 0, 0.3)"})}).on("click",function(){o("html,body").stop(!0).animate({scrollTop:0})})}(jQuery),function(o){var i=!1,n=!1,t=!1;o("#signin").on("click",function(){o(".login-register").show().find(".login").show().next().hide(),o("input").not(":submit").val("").prevAll("input").focus()}),o(".close").on("click",function(){o(".login-register").hide(),o("input").not(":submit").val("")}),o(".toreg").on("click",function(){o(".login").hide().next().show(),o("input").not(":submit").val("").prevAll("input").focus()}),o(".log:password").on("focus",function(){o(".iconfont.b").css({color:"#5bc2d8"}),o(".wrong2").hide()}).on("blur",function(){o(".iconfont.b").css({color:"#e5e5e5"})}).prevAll(":text").on("focus",function(){o(".wrong1").hide()}).on("blur",function(){o.ajax({url:"http://10.31.157.32/js-1907/xiangmu/php/register.php",data:{checkpe:o(".pe").val()},success:function(t){if(""!==o(".pe").val()){i=/^1[34578]\d{9}|(\w+[+-._]*\w+)\@(\w+[+-.]*\w+)\.(\w+[+-.]*\w+)$/.test(o(".pe").val())?t?(o(".wrong1").hide(),!0):(o(".wrong1").text("账号未注册，").append("<a href='#' class='toreg'>立即注册</b>").show(),!1):(o(".wrong1").text("账户有误，请重新输入").show(),!1)}else o(".wrong1").text("请输入丰趣海淘帐号").show(),i=!1}})}).parent().on("submit",function(){if(o.ajax({type:"post",url:"http://10.31.157.32/js-1907/xiangmu/php/login.php",data:{phone:o(".pe").val(),password:o(".log:password").val()},success:function(t){""!==o(".log:password").val()?t?(o(".wrong2").hide(),alert("登录成功！"),localStorage.setItem("customname",o(".pe").val()),location.href="http://10.31.157.32/js-1907/xiangmu/dist/detail.html"):(o(".wrong2").text("登录密码错误，请重新输入").show(),n=!1):(o(".wrong2").text("请输入密码").show(),n=!1)}}),!i||!n)return!1}),localStorage.getItem("customname")&&(o("#signin,#register").hide(),o("#hello").prepend(localStorage.getItem("customname")).show(),o("#quit").show().on("click",function(){localStorage.removeItem("customname"),o("#signin,#register").show(),o("#hello,#quit").hide(),location.href="http://10.31.157.32/js-1907/xiangmu/dist/detail.html"})),o("#register").on("click",function(){o(".login-register").show().find(".login").hide().next().show(),o("input").not(":submit").val("").prevAll(".phone").focus()}),o(".tologin").on("click",function(){o(".login").show().next().hide(),o("input").not(":submit").val("").prevAll("input").focus()}),o(".reg:password").on("focus",function(){o(".iconfont.b").css({color:"#5bc2d8"}),o(".tip3").hide()}).on("blur",function(){if(o(".iconfont.b").css({color:"#e5e5e5"}),""!==o(this).val()){t=/^(\w|[\w+-.,%=~!@#&'\<\>\?\(\)\*\/\$\^]){6,18}$/.test(o(this).val())?(o(".tip3").hide(),!0):(o(".tip3").text("密码请设置6-18位字母、数字或标点符号").show(),!1)}else o(".tip3").text("请设置登录密码").show(),t=!1}).prevAll(".email:text").on("focus",function(){o(".tip2").remove(".tologin").hide()}).on("blur",function(){o.ajax({url:"http://10.31.157.32/js-1907/xiangmu/php/register.php",data:{checkemail:o(".email").val()},success:function(t){if(""!==o(".email").val()){n=/^(\w+[+-._]*\w+)\@(\w+[+-.]*\w+)\.(\w+[+-.]*\w+)$/.test(o(".email").val())?t?(o(".tip2").text("邮箱已存在，").append("<a href='#' class='tologin'>立即登录</b>").show(),!1):(o(".tip2").hide(),!0):(o(".tip2").text("您的邮箱格式有误").show(),!1)}else o(".tip2").text("请输入您的邮箱").show(),n=!1}})}).prevAll(".phone:text").on("focus",function(){o(".tip1").remove(".tologin").hide()}).on("blur",function(){o.ajax({type:"get",url:"http://10.31.157.32/js-1907/xiangmu/php/register.php",data:{checkphone:o(".phone").val()},success:function(t){if(""!==o(".phone").val()){i=/^1[34578]\d{9}$/.test(o(".phone").val())?t?(o(".tip1").text("手机号已存在，").append("<a href='#' class='tologin'>立即登录</b>").show(),!1):(o(".tip1").hide(),!0):(o(".tip1").text("您的手机号码格式有误").show(),!1)}else o(".tip1").text("请输入您的手机号码").show(),i=!1}})}).parent().on("submit",function(){if(!(i&&n&&t))return!1})}(jQuery),function(i){i(".simg li").first().addClass("red"),i(".simg li").on("click",function(){var t=i(this).find("img").attr("src");i(this).addClass("red").siblings().removeClass("red"),i(".bimg img").attr({src:t})}),i(".bimg").hover(function(){i(".img2").stop(!0).animate({opacity:0}).hide().prev().show().stop(!0).animate({opacity:1});var o=i(".bimg").width()/i(".img1").width();i(".bimg").on("mousemove",function(t){i(".img1").css({top:-t.offsetY*o,left:-t.offsetX*o})})},function(){i(".img1").stop(!0).animate({opacity:0}).hide().next().show().stop(!0).animate({opacity:1})})}(jQuery),function(o){o(".goods-right").find("ol li a").on("click",function(){o(this).addClass("red").append("<span></span>").siblings().removeClass("red").find("span").detach("span")}),o(".goods-right").find(".more").on("click",function(){"block"==o(".goods-yh2").css("display")?o(".goods-yh2").hide():o(".goods-yh2").show()}),o(".goods-right").find(".down").on("click",function(){var t=o(this).next().val();isNaN(t)?o(this).next().val("NaN"):2<=--t?o(this).next().val(t):o(this).next().val(1)}),o(".goods-right").find(".up").on("click",function(){var t=o(this).prev().val();isNaN(t)?o(this).prev().val("NaN"):(t++,o(this).prev().val(t))})}(jQuery),function(n){var t=location.search.substring(1).split("=")[1];n.ajax({url:"http://10.31.157.32/js-1907/xiangmu/php/detail.php",data:{sid:t},dataType:"json"}).done(function(t){var o=t.urls.split(",");n(".simg img").attr("src",t.bpicurl),n(".bimg .bbimg").attr("sid",t.sid),n(".bimg .bbimg").attr("src",o[0]),n(".goods-right .dic2 img").attr("src",t.spicurl),n(".goods-right h2").text(t.title),n("#src .tip").text(t.title),n(".brand").text(t.brand),n(".goodsprice1").text(t.price),n(".goodsprice2").text(t.delprice);var i="";n.each(o,function(t,o){i+='\n            <li><img src="'+o+'" alt="" ></li>\n            '}),n(".simg ul").html(i)});var i=[],e=[],s=function(t,o,i){var n=new Date;n.setDate(n.getDate()+i),document.cookie=t+"="+encodeURIComponent(o)+";expires="+n},a=function(t){var o=decodeURIComponent(document.cookie).split("; "),i=!0,n=!1,e=void 0;try{for(var s,a=o[Symbol.iterator]();!(i=(s=a.next()).done);i=!0){var c=s.value.split("=");if(t===c[0])return c[1]}}catch(t){n=!0,e=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw e}}};n(".add").on("click",function(){var t=n(".bimg .img2").attr("sid");if(a("cookiesid")&&a("cookienum")&&(i=a("cookiesid").split(","),e=a("cookienum").split(",")),-1!==n.inArray(t,i)){var o=parseInt(e[n.inArray(t,i)])+parseInt(n("#count").val());e[n.inArray(t,i)]=o,s("cookienum",e.toString(),10)}else i.push(t),s("cookiesid",i.toString(),10),e.push(n("#count").val()),s("cookienum",e.toString(),10)})}(jQuery);